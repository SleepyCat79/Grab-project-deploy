2025-05-07 13:31:38,260 - __main__ - ERROR - Error registering routers: TravelModel.__init__() missing 1 required positional argument: 'openai_api_key'
Traceback (most recent call last):
  File "/Users/doa_ai/Developer/Grab-project/ai/model/app.py", line 32, in register_routers
    from src.services.backend_api import recommend_router
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/services/backend_api.py", line 36, in <module>
    travel_model = TravelModel()
TypeError: TravelModel.__init__() missing 1 required positional argument: 'openai_api_key'
2025-05-07 13:31:50,766 - __main__ - INFO - All routers registered successfully
2025-05-07 13:31:52,637 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 13:31:52,656 - app - INFO - All routers registered successfully
2025-05-07 13:34:19,794 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 13:34:19,812 - app - INFO - All routers registered successfully
2025-05-07 13:34:39,506 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 13:34:39,523 - app - INFO - All routers registered successfully
2025-05-07 13:35:17,968 - __mp_main__ - ERROR - Error registering routers: name 'SuggestWithIDAndType' is not defined
Traceback (most recent call last):
  File "/Users/doa_ai/Developer/Grab-project/ai/model/app.py", line 32, in register_routers
    from src.services.backend_api import recommend_router
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/services/backend_api.py", line 32, in <module>
    @recommend_router.post("/suggest/all", response_model=List[SuggestWithIDAndType])
                                                               ^^^^^^^^^^^^^^^^^^^^
NameError: name 'SuggestWithIDAndType' is not defined
2025-05-07 13:35:20,541 - __mp_main__ - ERROR - Error registering routers: name 'SuggestWithIDAndType' is not defined
Traceback (most recent call last):
  File "/Users/doa_ai/Developer/Grab-project/ai/model/app.py", line 32, in register_routers
    from src.services.backend_api import recommend_router
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/services/backend_api.py", line 32, in <module>
    @recommend_router.post("/suggest/all", response_model=List[SuggestWithIDAndType])
                                                               ^^^^^^^^^^^^^^^^^^^^
NameError: name 'SuggestWithIDAndType' is not defined
2025-05-07 13:35:25,455 - __mp_main__ - ERROR - Error registering routers: name 'SuggestWithIDAndType' is not defined
Traceback (most recent call last):
  File "/Users/doa_ai/Developer/Grab-project/ai/model/app.py", line 32, in register_routers
    from src.services.backend_api import recommend_router
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/services/backend_api.py", line 32, in <module>
    @recommend_router.post("/suggest/all", response_model=List[SuggestWithIDAndType])
                                                               ^^^^^^^^^^^^^^^^^^^^
NameError: name 'SuggestWithIDAndType' is not defined
2025-05-07 13:36:26,798 - __mp_main__ - ERROR - Error registering routers: name 'SuggestWithIDAndType' is not defined
Traceback (most recent call last):
  File "/Users/doa_ai/Developer/Grab-project/ai/model/app.py", line 32, in register_routers
    from src.services.backend_api import recommend_router
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/services/backend_api.py", line 32, in <module>
    @recommend_router.post("/suggest/all", response_model=List[SuggestWithIDAndType])
                                                               ^^^^^^^^^^^^^^^^^^^^
NameError: name 'SuggestWithIDAndType' is not defined
2025-05-07 13:36:29,910 - __mp_main__ - ERROR - Error registering routers: name 'SuggestWithIDAndType' is not defined
Traceback (most recent call last):
  File "/Users/doa_ai/Developer/Grab-project/ai/model/app.py", line 32, in register_routers
    from src.services.backend_api import recommend_router
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/services/backend_api.py", line 32, in <module>
    @recommend_router.post("/suggest/all", response_model=List[SuggestWithIDAndType])
                                                               ^^^^^^^^^^^^^^^^^^^^
NameError: name 'SuggestWithIDAndType' is not defined
2025-05-07 13:36:43,841 - __mp_main__ - ERROR - Error registering routers: name 'SuggestWithIDAndType' is not defined
Traceback (most recent call last):
  File "/Users/doa_ai/Developer/Grab-project/ai/model/app.py", line 32, in register_routers
    from src.services.backend_api import recommend_router
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/services/backend_api.py", line 33, in <module>
    @recommend_router.post("/suggest/all", response_model=List[SuggestWithIDAndType])
                                                               ^^^^^^^^^^^^^^^^^^^^
NameError: name 'SuggestWithIDAndType' is not defined
2025-05-07 13:36:48,286 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 13:36:48,309 - app - INFO - All routers registered successfully
2025-05-07 13:36:55,803 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 13:36:55,822 - app - INFO - All routers registered successfully
2025-05-07 13:37:32,068 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 13:37:32,084 - app - INFO - All routers registered successfully
2025-05-07 13:37:58,391 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 13:37:58,406 - app - INFO - All routers registered successfully
2025-05-07 13:38:44,207 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 13:38:44,239 - app - INFO - All routers registered successfully
2025-05-07 13:38:59,046 - __mp_main__ - ERROR - Error registering routers: No module named 'ai'
Traceback (most recent call last):
  File "/Users/doa_ai/Developer/Grab-project/ai/model/app.py", line 32, in register_routers
    from src.services.backend_api import recommend_router
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/services/backend_api.py", line 7, in <module>
    from ai.model.src.agents.travel_model import TravelModel
ModuleNotFoundError: No module named 'ai'
2025-05-07 13:41:46,761 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 13:41:46,785 - app - INFO - All routers registered successfully
2025-05-07 13:41:57,636 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 13:41:57,661 - app - INFO - All routers registered successfully
2025-05-07 13:42:02,390 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 13:42:02,409 - app - INFO - All routers registered successfully
2025-05-07 13:42:28,626 - src.services.backend_api - INFO - Processing recommendation query for Hanoi
2025-05-07 13:42:28,627 - src.services.backend_api - ERROR - Error processing recommendation query: TravelModel.__init__() missing 1 required positional argument: 'openai_api_key'
Traceback (most recent call last):
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/services/backend_api.py", line 98, in suggest_trips
    travel_model = TravelModel()
TypeError: TravelModel.__init__() missing 1 required positional argument: 'openai_api_key'
2025-05-07 13:42:48,657 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 13:42:48,681 - app - INFO - All routers registered successfully
2025-05-07 13:42:52,897 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 13:42:52,915 - app - INFO - All routers registered successfully
2025-05-07 13:42:52,917 - src.services.backend_api - INFO - Processing recommendation query for Hanoi
2025-05-07 13:42:52,992 - src.agents.travel_model - INFO - Setting up all databases...
2025-05-07 13:42:56,999 - src.agents.travel_model - INFO - All databases setup completed
2025-05-07 13:42:57,000 - src.agents.travel_model - INFO - Processing query: 
        Planning a trip to Hanoi with the following details:
        - Group: 2 adults, 1 children, 0 infants
        - Budget: medium (approx. 15000000 VND)
        - Duration: 6 days
        - Season: summer
        - Travel Style: family
        
        Preferences:
        - Transportation: car rental
        - Accommodation: resort
        - Food: seafood
        - Places to visit: beach
        - Activities: swimming, sightseeing
        - Extra: kid-friendly
        Please suggest:
        1. Suitable accommodations
        2. Interesting activities and places to visit
        3. Recommended restaurants and food options
        
        Consider:
        - The travel style and preferences
        - The season and weather conditions
        - The budget constraints
        - The duration of stay
        - The location and its unique offerings
        
2025-05-07 13:42:57,000 - src.agents.travel_model - DEBUG - Sending request to OpenAI...
2025-05-07 13:42:59,271 - src.agents.travel_model - INFO - OpenAI response: ChatCompletion(id='chatcmpl-BUSmX0dfxnz70sEqrvXNybBViWqR2', choices=[Choice(finish_reason='function_call', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', annotations=[], audio=None, function_call=FunctionCall(arguments='{"query_text":"family-friendly resort in Hanoi with car rental service, medium budget"}', name='query_hotels'), tool_calls=None))], created=1746600177, model='gpt-4o-2024-08-06', object='chat.completion', service_tier='default', system_fingerprint='fp_90122d973c', usage=CompletionUsage(completion_tokens=28, prompt_tokens=945, total_tokens=973, completion_tokens_details=CompletionTokensDetails(accepted_prediction_tokens=0, audio_tokens=0, reasoning_tokens=0, rejected_prediction_tokens=0), prompt_tokens_details=PromptTokensDetails(audio_tokens=0, cached_tokens=0)))
2025-05-07 13:42:59,272 - src.agents.travel_model - INFO - Model response message: ChatCompletionMessage(content=None, refusal=None, role='assistant', annotations=[], audio=None, function_call=FunctionCall(arguments='{"query_text":"family-friendly resort in Hanoi with car rental service, medium budget"}', name='query_hotels'), tool_calls=None)
2025-05-07 13:42:59,272 - src.agents.travel_model - INFO - Function call: query_hotels
2025-05-07 13:42:59,272 - src.agents.travel_model - DEBUG - Function arguments: {'query_text': 'family-friendly resort in Hanoi with car rental service, medium budget'}
2025-05-07 13:42:59,272 - src.agents.travel_model - INFO - Querying all databases with context
2025-05-07 13:42:59,272 - src.agents.travel_model - INFO - Querying hotels with context: family-friendly resort in Hanoi with car rental service, medium budget
2025-05-07 13:43:03,529 - src.agents.travel_model - INFO - Added 5 hotel recommendations
2025-05-07 13:43:03,530 - src.agents.travel_model - INFO - Querying places with context: family-friendly resort in Hanoi with car rental service, medium budget
2025-05-07 13:43:06,733 - src.agents.travel_model - INFO - place_ids: []
2025-05-07 13:43:06,734 - src.agents.travel_model - INFO - Added 0 place recommendations
2025-05-07 13:43:06,734 - src.agents.travel_model - INFO - Querying restaurants with context: family-friendly resort in Hanoi with car rental service, medium budget
2025-05-07 13:43:06,734 - src.agents.travel_model - INFO - Attempting to query FnB with text: family-friendly resort in Hanoi with car rental service, medium budget, top_k: 20
2025-05-07 13:43:09,784 - src.agents.travel_model - INFO - FnB query returned 20 results
2025-05-07 13:43:09,785 - src.agents.travel_model - INFO - Added 20 restaurant recommendations
2025-05-07 13:43:09,785 - src.agents.travel_model - INFO - Final result distribution: 5 hotels, 0 places, 20 restaurants
2025-05-07 13:43:09,785 - src.services.backend_api - INFO - Recommendation query processed successfully, got 25 items
2025-05-07 13:43:09,785 - src.services.backend_api - INFO - Grouped recommendations: 5 accommodations, 0 places, 20 restaurants
2025-05-07 13:43:09,786 - src.services.backend_api - INFO - Final response has 26 items
2025-05-07 13:43:44,909 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 13:43:44,932 - app - INFO - All routers registered successfully
2025-05-07 13:43:48,858 - __mp_main__ - ERROR - Error registering routers: unindent does not match any outer indentation level (trip_plan_api.py, line 24)
Traceback (most recent call last):
  File "/Users/doa_ai/Developer/Grab-project/ai/model/app.py", line 33, in register_routers
    from src.services.trip_plan_api import router as trip_plan_router
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/services/trip_plan_api.py", line 24
    logger.info("PlanModel imported successfully")
                                                  ^
IndentationError: unindent does not match any outer indentation level
2025-05-07 13:43:50,728 - __mp_main__ - ERROR - Error registering routers: unexpected indent (trip_plan_api.py, line 8)
Traceback (most recent call last):
  File "/Users/doa_ai/Developer/Grab-project/ai/model/app.py", line 33, in register_routers
    from src.services.trip_plan_api import router as trip_plan_router
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/services/trip_plan_api.py", line 8
    from ai.model.src.agents.plan_model import PlanModel
IndentationError: unexpected indent
2025-05-07 13:43:53,229 - __mp_main__ - ERROR - Error registering routers: unindent does not match any outer indentation level (trip_plan_api.py, line 25)
Traceback (most recent call last):
  File "/Users/doa_ai/Developer/Grab-project/ai/model/app.py", line 33, in register_routers
    from src.services.trip_plan_api import router as trip_plan_router
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/services/trip_plan_api.py", line 25
    logger.info("PlanModel imported successfully")
                                                  ^
IndentationError: unindent does not match any outer indentation level
2025-05-07 13:43:59,074 - __mp_main__ - ERROR - Error registering routers: unindent does not match any outer indentation level (trip_plan_api.py, line 25)
Traceback (most recent call last):
  File "/Users/doa_ai/Developer/Grab-project/ai/model/app.py", line 33, in register_routers
    from src.services.trip_plan_api import router as trip_plan_router
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/services/trip_plan_api.py", line 25
    logger.info("PlanModel imported successfully")
                                                  ^
IndentationError: unindent does not match any outer indentation level
2025-05-07 13:44:03,838 - __mp_main__ - ERROR - Error registering routers: invalid syntax (trip_plan_api.py, line 22)
Traceback (most recent call last):
  File "/Users/doa_ai/Developer/Grab-project/ai/model/app.py", line 33, in register_routers
    from src.services.trip_plan_api import router as trip_plan_router
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/services/trip_plan_api.py", line 22
    eate a mock model
         ^
SyntaxError: invalid syntax
2025-05-07 13:44:08,285 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 13:44:08,302 - app - INFO - All routers registered successfully
2025-05-07 13:44:16,456 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 13:44:16,474 - app - INFO - All routers registered successfully
2025-05-07 13:44:42,657 - __mp_main__ - ERROR - Error registering routers: name 'setup_logger' is not defined
Traceback (most recent call last):
  File "/Users/doa_ai/Developer/Grab-project/ai/model/app.py", line 33, in register_routers
    from src.services.trip_plan_api import router as trip_plan_router
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/services/trip_plan_api.py", line 11, in <module>
    logger = setup_logger(__name__)
             ^^^^^^^^^^^^
NameError: name 'setup_logger' is not defined
2025-05-07 13:44:47,836 - __mp_main__ - ERROR - Error registering routers: name 'setup_logger' is not defined
Traceback (most recent call last):
  File "/Users/doa_ai/Developer/Grab-project/ai/model/app.py", line 33, in register_routers
    from src.services.trip_plan_api import router as trip_plan_router
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/services/trip_plan_api.py", line 11, in <module>
    logger = setup_logger(__name__)
             ^^^^^^^^^^^^
NameError: name 'setup_logger' is not defined
2025-05-07 13:44:50,837 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 13:44:50,856 - app - INFO - All routers registered successfully
2025-05-07 13:44:55,134 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 13:44:55,147 - app - INFO - All routers registered successfully
2025-05-07 13:44:59,831 - __mp_main__ - ERROR - Error registering routers: name 'setup_logger' is not defined
Traceback (most recent call last):
  File "/Users/doa_ai/Developer/Grab-project/ai/model/app.py", line 33, in register_routers
    from src.services.trip_plan_api import router as trip_plan_router
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/services/trip_plan_api.py", line 11, in <module>
    logger = setup_logger(__name__)
             ^^^^^^^^^^^^
NameError: name 'setup_logger' is not defined
2025-05-07 13:45:02,664 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 13:45:02,676 - app - INFO - All routers registered successfully
2025-05-07 13:45:06,008 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 13:45:06,020 - app - INFO - All routers registered successfully
2025-05-07 13:46:06,259 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 13:46:06,279 - app - INFO - All routers registered successfully
2025-05-07 13:46:29,458 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 13:46:29,475 - app - INFO - All routers registered successfully
2025-05-07 13:47:13,978 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 13:47:13,995 - app - INFO - All routers registered successfully
2025-05-07 13:47:22,497 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 13:47:22,509 - app - INFO - All routers registered successfully
2025-05-07 13:47:33,634 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 13:47:33,647 - app - INFO - All routers registered successfully
2025-05-07 13:47:43,568 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 13:47:43,581 - app - INFO - All routers registered successfully
2025-05-07 13:47:52,556 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 13:47:52,569 - app - INFO - All routers registered successfully
2025-05-07 13:48:17,283 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 13:48:17,300 - app - INFO - All routers registered successfully
2025-05-07 13:48:44,020 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 13:48:44,038 - app - INFO - All routers registered successfully
2025-05-07 13:49:33,984 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 13:49:34,001 - app - INFO - All routers registered successfully
2025-05-07 13:49:42,087 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 13:49:42,102 - app - INFO - All routers registered successfully
2025-05-07 13:50:18,596 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 13:50:18,613 - app - INFO - All routers registered successfully
2025-05-07 13:51:23,386 - __mp_main__ - ERROR - Error registering routers: No module named 'ai'
Traceback (most recent call last):
  File "/Users/doa_ai/Developer/Grab-project/ai/model/app.py", line 33, in register_routers
    from src.services.trip_plan_api import router as trip_plan_router
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/services/trip_plan_api.py", line 8, in <module>
    from ai.model.src.agents.plan_agent import PlanModel
ModuleNotFoundError: No module named 'ai'
2025-05-07 13:51:42,195 - __mp_main__ - ERROR - Error registering routers: No module named 'ai'
Traceback (most recent call last):
  File "/Users/doa_ai/Developer/Grab-project/ai/model/app.py", line 32, in register_routers
    from src.services.backend_api import recommend_router
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/services/backend_api.py", line 7, in <module>
    from ai.model.src.agents.travel_agent import TravelModel
ModuleNotFoundError: No module named 'ai'
2025-05-07 13:52:09,401 - __mp_main__ - ERROR - Error registering routers: No module named 'ai'
Traceback (most recent call last):
  File "/Users/doa_ai/Developer/Grab-project/ai/model/app.py", line 33, in register_routers
    from src.services.trip_plan_api import router as trip_plan_router
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/services/trip_plan_api.py", line 8, in <module>
    from ai.model.src.agents.plan_agent import PlanModel
ModuleNotFoundError: No module named 'ai'
2025-05-07 13:52:16,640 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 13:52:16,657 - app - INFO - All routers registered successfully
2025-05-07 15:22:29,855 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 15:22:29,871 - app - INFO - All routers registered successfully
2025-05-07 15:23:21,001 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 15:23:21,018 - app - INFO - All routers registered successfully
2025-05-07 15:24:16,592 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 15:24:16,607 - app - INFO - All routers registered successfully
2025-05-07 15:24:38,368 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 15:24:38,384 - app - INFO - All routers registered successfully
2025-05-07 15:24:47,237 - __mp_main__ - INFO - All routers registered successfully
2025-05-07 15:24:47,252 - app - INFO - All routers registered successfully
